#!/bin/bash

if [ `whoami` != "root" ]; then
        echo "bro you already know why you're seeing this message"
        printf "\n"
        echo 4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qKA4qGK4qCK4qCA4qCA4qGg4qCB4qCE4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qKC4qCA4qCA4qCA4qCh4qCA4qCACuKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKgheKgguKgmOKgoOKioOKjgeKhk+KigOKhguKggOKgsOKggOKggOKggOKggOKggOKggOKgoOKggOKggOKggOKggOKggOKghuKggOKggOKggOKggOKggArioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioYzioIjioIDioIfioIDioofio77iooHioabio4XioKDioIPioIDioIDioIDioIDiobDioKHioYXioYfioIDioIDioIDioIDiorjioIDioIDioIDioIDioIAK4qCA4qCA4qOA4qCK4qCI4qKA4qCA4qCA4qCA4qCw4qCA4qGC4qCA4qCA4qO+4qO84qOp4qG+4qGA4qCg4qCB4qCC4qCA4qCA4qKA4qKe4qGS4qCQ4qGX4qCT4qCC4qCA4qCA4qCA4qGA4qCE4qGA4qKA4qKc4qCACuKggOKgmOKhgOKggOKggOKiqOKgtOKgpOKggOKggOKggOKgguKgmOKhgOKhj+KjvOKjv+Kjv+Kjv+Kgh+KjvOKggOKggOKhoOKigeKijuKgoOKggOKiueKisOKggOKggOKggOKggOKhh+KgkOKhkuKhseKhh+KggArioIDioIDioIPio4DioYDioIzioIDioIDioIDioIDioIDioIDioYfioIfioYfiorvioL/io7/iob/ioIDiorniooDioIzioKDioILio7nio7/io7/io7/io7bio6bioIDioIDiooDiob/iooDioJTioZ3iorDioIAK4qCA4qCA4qCA4qCA4qCA4qKA4qGA4qCA4qCA4qCA4qCA4qC44qK54qGP4qCH4qCA4qCg4qCE4qCB4qCA4qGg4qCD4qCA4qCA4qCA4qG/4qK/4qO/4qO/4qCP4qKg4qCA4qCA4qGY4qGX4qKB4qCM4qCA4qCA4qCACuKggOKggOKggOKggOKgmOKggOKggOKggOKgieKggOKggOKgkuKgm+Kgs+KghOKggOKigOKhgOKggOKggOKggOKggOKggOKggOKggOKggeKggOKghOKgi+KjoOKgguKggOKhkOKgmOKglOKggeKggOKggOKggOKjhArioIDioIDioIDioIDioIbioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioInioIHioIDioJLioILioKDioKTioIDiooDio5TioILioIDioJTioqDioJ3ioIDioIDioIDiorDioIDioIAK4qCA4qCA4qCA4qCw4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCZ4qCf4qCB4qCF4qCA4qCA4qCA4qCA4qGE4qCYCuKggOKggOKggOKghuKggOKggOKggOKggOKjgOKhgOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKipuKggOKggOKgh+KggOKggOKggOKggOKigeKggArioIDioIDioIfioYHioIDioIDioIDioqDioY/ioIniorHioYTioIDioIDioIDioIDioIDioYDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDiooDioYjiorDioIDioLDioIDioIDioIDioIDioIjioYUK4qCA4qCE4qCA4qCC4qCA4qCA4qCA4qO44qCJ4qCT4qKv4qCA4qCw4qCS4qKy4qGA4qKw4qCH4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qGG4qCg4qKD4qCA4qGG4qCA4qKj4qCA4qCA4qCA4qCA4qCwCuKggOKiguKggeKggOKggOKggOKggOKgk+KgpOKgpOKgnuKioOKhnuKgmeKjuuKggeKjvOKipOKgmuKggeKgsOKgkuKiouKhgOKggOKggOKggOKggOKhjeKggOKigOKhhuKgsOKggOKggOKiguKggOKggOKggOKggQrioIDioJjioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioInioInioIvioKDioIfioJjio4bioqDioZbioJLiorrioIHioIDioIDioIDioIDiorHioIDioIDiooHioIDioYbiorDioIDioqPioIDioIDioIgK4qCA4qCG4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCJ4qCL4qCb4qCA4qCA4qCA4qCA4qCA4qOI4qGA4qCA4qK44qCA4qKg4qC44qCA4qCA4qC34qGA4qCACuKioOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKgmeKih+KggOKjmOKjgOKhmOKggOKggOKggOKgguKhnOKghArioIDioInioIHioJDioJLioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioLDioJfioILioInioIDioIDioYjioIfioIDioIDioIDioqDioY4K4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qGQ4qCJ4qCA4qCQ4qCC4qCA4qCk4qCA4qKA4qGA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qOk4qC24qCk4qGA4qCA4qKg4qKN4qCA4qCA4qCA4qGE4qCI4qK4CuKggOKggOKggOKggOKggOKggOKggOKigOKggOKgjOKggOKggOKggOKggOKisOKggOKggOKggOKggOKijOKgiOKgieKggOKhtOKghuKgoOKjpOKiveKhgOKggOKggOKggOKgq+KhgeKgouKhgOKioOKggeKggOKhgA== | base64 -d
        printf "\n"
        exit 1
fi

echo 4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qKA4qOA4qOk4qOk4qOk4qOk4qOk4qOk4qOE4qOA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKjoOKjtOKjvuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjt+KjpuKhgOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDioIDioIDioIDioIDioIDio7Dio7/io7/io7/io7/io7/io7/io7/io7/ior/io7/iornio7/io7/io7/io7/io7/io7/io7/io7bioYDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qKA4qO+4qO/4qK74qO/4qO/4qO/4qO/4qO/4qO/4qGf4qK44qO/4qO/4qO/4qO/4qO/4qO/4qO/4qGf4qO/4qO/4qOP4qOG4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKggOKggOKggOKjvuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KggeKiuOKjv+Kjv+Kjv+Kjv+Kjv+KgmOKjv+Kjv+Kjv+Kjv+Kjv+KjqOKhgOKggOKggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDioIDioIDiorjio7/io7/io7/io7/io7/io7/io7/io7/io7/ioY/ioIDioLjio7/io7/io7/io7/io7/ioIDioLjio7/io7/io7/io7/io7/io7fioIDioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qCA4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qGf4qCA4qCA4qCA4qK/4qO/4qO/4qO/4qG/4qCA4qKA4qO54qO/4qO/4qO/4qO/4qO/4qOn4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKiuOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Khn+Khv+KggeKggOKggOKgoOKguOKjv+Kjv+Kjv+Khh+KggOKggOKggOKiu+Kiu+Kjv+Kjv+Kjv+Kjv+KggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDiorjio7/io7/io7/io7/io7/io7/io7/io7/ioKHioIPioIDioIDioIDioIDioIDio7/io7/iornioIPioIDioIDioIDioIjioLjio7/io7/io7/io7/ioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qK44qO/4qO/4qCY4qG/4qO/4qO/4qO/4qGH4qCQ4qCb4qK74qO/4qO74qCC4qCA4qC54qCD4qCD4qCA4qCY4qK74qOf4qGL4qCB4qO/4qO/4qO/4qO/4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKiuOKjv+Kjv+KggOKgoOKjv+Kjv+Kjv+Khh+KggOKggOKgmOKiv+Khv+KggOKggOKggOKggOKggOKggOKggOKgmOKgv+Kgg+KggOKiueKjv+Kjv+Kjv+KggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDiorjio7/io7/ioIDioKLio7/io7/io7/ioYfioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDio7/io7/io7/io7/ioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qK44qO/4qO/4qCA4qCA4qK74qO/4qO/4qOH4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCg4qO/4qO/4qO/4qO/4qGG4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKiuOKjv+Kjv+KggOKggOKiuOKjv+Kjv+Kjh+KgguKhgOKigOKjgOKggOKggOKgoOKggOKggOKggOKggOKggOKggOKggOKggOKggOKjv+Kjv+Kjv+Kjv+Khh+KggOKggOKggOKggOKggOKggArioIDioIDioIDioIDiorjio7/io7/ioIDioIDioIDio7/io7/io7/ioIDioIjiopjiopvioYPioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioKDior/io7/io7/io7/ioYfioIDioIDioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qK44qO/4qO/4qGE4qCA4qCA4qC44qG/4qO/4qCA4qGA4qCh4qOY4qCA4qGE4qCA4qOg4qGW4qKA4qK24qGA4qKA4qG04qGG4qCA4qCe4qCL4qO/4qO/4qGH4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKiuOKjv+Kjv+Kjh+KjpOKjpOKjpOKjpeKhv+KgguKggOKgg+Kiv+KguOKggeKguOKgj+KigOKhiOKjgOKgm+Kgm+KgpOKgoOKggOKjsOKjtuKjv+Kjv+Kjt+KjhOKggOKggOKggOKggOKggArioIDioIDioIDioIDiorjio7/io7/io7/io7/io7/io7/io7/ioYPioIDioIDioIDioKDioITioIDio5DioYDioZ7ioKTioJTioIDioYTioIjioIbioIDio4jio7/io7/io7/io7/io7/ioYbioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qK44qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO34qGA4qCB4qCA4qCA4qCY4qGw4qO94qOB4qOZ4qOS4qOT4qGS4qCW4qCI4qCo4qK44qO/4qO/4qO/4qO/4qO/4qO/4qO/4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKjuOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KjpuKjhOKjgOKggOKigOKjv+Kjv+Kjv+Kjv+Kjv+Khh+KggOKggOKigOKjvuKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+KhhuKggOKggOKggArioIDioIDioIDioIDio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7fio6Tio7bio7/io7/io7/io7/io7/io7/io7/io7/io7/ioYfioIDioIDioIAK4qCA4qCA4qCA4qCA4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qGP4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qCA4qCA4qCA4qCACuKggOKggOKggOKggOKjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjh+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Kjv+Khh+KggOKggOKggArio6Tio6Tio6Tio6Tio7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io7/io6fio4A= | base64 -d

printf "\n"

ID_LIKE="$(cat /etc/*release | grep "ID_LIKE")"

if [[ ${ID_LIKE} = "ID_LIKE=debian" ]] || [[ ${ID_LIKE} = "ID_LIKE=\"debian\"" ]]; then
        sudo apt-get install iptables -y

elif [[ ${ID_LIKE} = "ID_LIKE=rhel fedora" ]] || [[ ${ID_LIKE} = "ID_LIKE=\"rhel fedora\"" ]]; then
        sudo systemctl disable firewalld
        sudo systemctl stop firewalld
        sudo yum install iptables-services
        sudo systemctl start iptables
        sudo systemctl start ip6tables
        sudo systemctl enable iptables
        sudo systemctl enable ip6tables
else
        echo "This operating system is not supported"
        exit 1
fi

#echo Setting Timezone to America/Los_Angeles
#sudo timedatectl set-timezone America/Los_Angeles

sudo systemctl restart rsyslog

echo Setting Up IPV4
sudo iptables -F
sudo iptables -A INPUT -p tcp --dport 23 -j DROP
sudo iptables -X LOGGING
sudo iptables -N LOGGING
sudo iptables -A INPUT -j LOGGING
sudo iptables -A LOGGING -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j LOG --log-prefix "Incoming SSH Connection: " --log-level 7
sudo iptables -I OUTPUT -p tcp -m tcp --sport 22 -m state --state NEW,ESTABLISHED -j LOG --log-prefix "Outgoing SSH connection: " --log-level 7
sudo iptables -A LOGGING -j ACCEPT

echo Setting Up IPV6
sudo ip6tables -F
sudo ip6tables -X
sudo ip6tables -P INPUT DROP
sudo ip6tables -P OUTPUT DROP
sudo ip6tables -P FORWARD DROP



echo Script Done!

echo Ll9fICAgICAgICBfXyAgICAgICAgX19fLiAgIC5fXyAgICAgICAgICAgICAgICAgCnxfX3xfX19fX18vICB8X19fX19fIFxfIHxfXyB8ICB8ICAgX19fXyAgIF9fX19fXwp8ICBcX19fXyBcICAgX19cX18gIFwgfCBfXyBcfCAgfCBfLyBfXyBcIC8gIF9fXy8KfCAgfCAgfF8+ID4gIHwgIC8gX18gXHwgXF9cIFwgIHxfXCAgX19fLyBcX19fIFwgCnxfX3wgICBfXy98X198IChfX19fICAvX19fICAvX19fXy9cX19fICA+X19fXyAgPgogICB8X198ICAgICAgICAgICAgIFwvICAgIFwvICAgICAgICAgIFwvICAgICBcLyAK | base64 -d 

exit
